<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>select_page</title>
</head>

<style>
    @font-face {
        font-family: 'CustomFont';
        src: url("./.font/BMJUA.ttf") format('truetype');
        font-weight: bold;
        font-style: normal;
    }
    body{
        background-color: #EFF7FC;
        width: 100%;
        height: 100vh;
        margin: 0;
        padding: 0;
    }
    .header{
        width: 100%;
        height: 15%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;

    }
    .logo{
        width: 371px;
        height: 57px;
    }
    .logo_img{
        width: 35%;
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
    }
    .menu_div{
        width: 65%;
        height: 100%;
        display: flex;
        /*background-color: #0011ff;*/
        flex-direction: row;
        /*justify-content: center;*/
        align-items: center;
    }
    .menu{
        width: 20%;
        text-align: center;
        font-family: 'CustomFont';
        font-size: 20px;
        font-weight: bold;
        text-decoration: none;
        color: #000;
    }
    .menu:hover{
        color: #62647D;
        cursor: pointer;
    }
    .search_btn, #search{
        width: 40px;
        height: 40px;
    }
    .search_btn{
        all:unset;
        display: inline-block;
    }

    .whole_screen{
        display: flex;
        width: 100%;
        height: 80%;
        

    }
    .left_side{
        display:flex;
        flex-direction: column;
        width: 80%;
        height: 100%;
        
        
    }
    .right_side{
        display:flex;
        flex-direction: column;
        width: 20%;
        height: 100%;

        align-items: center;
        /*justify-content: center;*/
        
    }
    .first_row{
        display: flex;
        width: 100%;
        height: 60%;
    }

    .album_cover{
        width:23%;
        height:80%;
        /*background-color: green;*/
        display: flex;
        flex-direction: row;
        justify-content: center;
        border-radius: 10px;
        align-items: center;
        margin-left: 50px;
        margin-top: 10px;
    }
    .album_example{
        width: 100%;
        height: 100%;
        border-radius: 10px;
    }
    
    .album_description_and_score{
        width:62%;
        height:80%;
        background-color: #62647D;
        display: flex;
        flex-direction: row;
        align-items: center;
        border-radius: 10px;
        margin-left: 70px;
        margin-top: 10px;
    }
    .album_description{
        width: 60%;
        height:90%;
        /*background-color: #a7daff;*/
        display: flex;
        flex-direction: column;
        justify-content: left;
        align-items: left;
    }
    .album_score_and_edit{
        width: 40%;
        height:90%;
        /*background-color: #a7daff;*/
        display: flex;
        flex-direction: column;
        justify-content: left;
        align-items: left;
    }

    .album_score{
        width: 100%;
        height:60%;
        /*background-color: green;*/
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .album_edit{
        width: 100%;
        height: 40%;
        /*background-color: yellow;*/
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: end;
    }
    .edit{
        all:unset;
        display: inline-block;
        width: 50px;
        height: 50px;
        margin-right: 35px;
        margin-bottom: 20px;
        
    }

    .album_name{
        padding: 0%;
        margin: 0%;
        margin-left: 45px;
        text-align: left;
        font-family: 'CustomFont';
        font-size: 35px;
        font-weight: bold;
        text-decoration: none;
        /*color: #275475;*/
        margin-bottom: 15px;
    }
    .album_score_font{
        width: 100%;
        text-align: center;
        font-family: 'CustomFont';
        font-size: 65px;
        font-weight: bold;
        text-decoration: none;
        /*color: #275475;*/
        margin-left: 70px;
    }
    .second_row{
        display: flex;
        flex-direction:row;
        width: 100%;
        height: 40%;

    }
    .comment{

        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        width:93.5%;
        height:90%;
        padding: 0%;
        margin: 0%;
        margin-left: 35px;
        text-align: left;
        font-family: 'CustomFont';
        font-size: 25px;
        font-weight: bold;
        text-decoration: none;
        /*color: #275475;*/
        margin-bottom: 15px;
        background-color: #D9D9D9;
        border-radius: 10px;
    }
    .comment_edit{
        width:10%;
        height:90%;
        display: flex;
        align-items: end;
        justify-content: flex-end;
        background-color: #D9D9D9;
  
    }
    .bar{
        width:80%;
        height:80%;
        border-radius: 10px;
        background-color: #275475;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 10px;
    }
    .sub_bar1{
        width: 80%;
        height: 28%;
        border-radius: 10px;
        
        border: none;
        margin-bottom: 15px;
        padding: 0%;
    }
    .sub_bar2{
        width: 80%;
        height: 28%;
        border-radius: 10px;
        
        border: none;
        margin-bottom: 15px;
        padding: 0%;
    }
    .sub_bar3{
        width: 80%;
        height: 28%;
        border-radius: 10px;
        
        border: none;
        padding: 0%;

    }
    .plus_button{
        all:unset;
        display: inline-block;
        width: 50px;
        height: 50px;
        margin-top: 10px;
    }

    .plus_button:hover{
        cursor: pointer;
    }
    .write_comment{
        padding: 20px;
    }

</style>

<body>
    <div class="header">
        <!--logo image-->
        <div class="logo_img">
            <a href="index.html"><img class="logo" src="./images/Logo.png" /></a> 
        </div>
        <!--menu division next to logo image-->
        <div class="menu_div">
            <a href="main_menu_selection.html?category=1" class="menu">Movie</a>
            <a href="main_menu_selection.html?category=0" class="menu">Music</a>
            <a href="main_menu_selection.html?category=2" class="menu">Food</a>
            <a href="main_menu_selection.html?category=3" class="menu">etc.</a>
            <!--button image-->
            <button class="search_btn">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 101 101" id="search">
                    <path d="M63.3 59.9c3.8-4.6 6.2-10.5 6.2-17 0-14.6-11.9-26.5-26.5-26.5S16.5 28.3 16.5 42.9 28.4 69.4 43 69.4c6.4 0 12.4-2.3 17-6.2l20.6 20.6c.5.5 1.1.7 1.7.7.6 0 1.2-.2 1.7-.7.9-.9.9-2.5 0-3.4L63.3 59.9zm-20.4 4.7c-12 0-21.7-9.7-21.7-21.7s9.7-21.7 21.7-21.7 21.7 9.7 21.7 21.7-9.7 21.7-21.7 21.7z"></path>
                  </svg>
            </button>
        </div>
    </div>
    
    <div class ='whole_screen'>

        <div class ='left_side'>

            <div class = "first_row">
                <div class = "album_cover">
                    <img class="album_example" src="./images/album_cover_example.png"  id="main_img"/>
                </div>
                <div class = "album_description_and_score">
                    <div class = "album_description">
                        <p class="album_name" id="text1">Pharmacy</p>
                        <p class="album_name" id="text2">Galantis</p>
                        <p class="album_name" id="text3">2015</p>
                        <p class="album_name" id="text4">Electro-house</p>
                    </div>
                    <div class = "album_score_and_edit">
                        <div class = "album_score">
                            <p class="album_score_font" id="score">8.9</p>
                        </div>
                        
                        <a href = "add_edit_page.html" class ="album_edit" id ="editIndex">
                            <div class = "edit">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="edit">
                                    <path d="M3.5,24h15A3.51,3.51,0,0,0,22,20.487V12.95a1,1,0,0,0-2,0v7.537A1.508,1.508,0,0,1,18.5,22H3.5A1.508,1.508,0,0,1,2,20.487V5.513A1.508,1.508,0,0,1,3.5,4H11a1,1,0,0,0,0-2H3.5A3.51,3.51,0,0,0,0,5.513V20.487A3.51,3.51,0,0,0,3.5,24Z"></path>
                                    <path d="M9.455,10.544l-.789,3.614a1,1,0,0,0,.271.921,1.038,1.038,0,0,0,.92.269l3.606-.791a1,1,0,0,0,.494-.271l9.114-9.114a3,3,0,0,0,0-4.243,3.07,3.07,0,0,0-4.242,0l-9.1,9.123A1,1,0,0,0,9.455,10.544Zm10.788-8.2a1.022,1.022,0,0,1,1.414,0,1.009,1.009,0,0,1,0,1.413l-.707.707L19.536,3.05Zm-8.9,8.914,6.774-6.791,1.4,1.407-6.777,6.793-1.795.394Z"></path>
                                </svg>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class = "second_row">
                <div class ="comment">
                    <p class="write_comment" id="comment">write</p>
                </div>
                <!--
                <div class = "comment_edit">
                    <button class = "edit">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="edit">
                            <path d="M3.5,24h15A3.51,3.51,0,0,0,22,20.487V12.95a1,1,0,0,0-2,0v7.537A1.508,1.508,0,0,1,18.5,22H3.5A1.508,1.508,0,0,1,2,20.487V5.513A1.508,1.508,0,0,1,3.5,4H11a1,1,0,0,0,0-2H3.5A3.51,3.51,0,0,0,0,5.513V20.487A3.51,3.51,0,0,0,3.5,24Z"></path>
                            <path d="M9.455,10.544l-.789,3.614a1,1,0,0,0,.271.921,1.038,1.038,0,0,0,.92.269l3.606-.791a1,1,0,0,0,.494-.271l9.114-9.114a3,3,0,0,0,0-4.243,3.07,3.07,0,0,0-4.242,0l-9.1,9.123A1,1,0,0,0,9.455,10.544Zm10.788-8.2a1.022,1.022,0,0,1,1.414,0,1.009,1.009,0,0,1,0,1.413l-.707.707L19.536,3.05Zm-8.9,8.914,6.774-6.791,1.4,1.407-6.777,6.793-1.795.394Z"></path>
                          </svg>
                    </button>
                </div>
                -->
            </div>
        
        </div>

        <div class="right_side">
            
            <div class="bar">
                <a href="select_page.html" class = "sub_bar1" id="link1">
                    <img class="album_example" src="./images/album_cover_example.png" id="img1"/>

                </a>

                <a href="select_page.html" class = "sub_bar2" id="link2">
                    <img class="album_example" src="./images/album_cover_example.png" id="img2"/>

                </a>

                <a href="select_page.html" class = "sub_bar3" id="link3">
                    <img class="album_example" src="./images/album_cover_example.png" id="img3"/>

                </a>
            </div>
    
            <div class = "plus">
                <button class = "plus_button">
    
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="plus">
                        <g>
                          <g>
                            <rect width="24" height="24" opacity="0"></rect>
                            <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"></path>
                            <path d="M15 11h-2V9a1 1 0 0 0-2 0v2H9a1 1 0 0 0 0 2h2v2a1 1 0 0 0 2 0v-2h2a1 1 0 0 0 0-2z"></path>
                          </g>
                        </g>
                      </svg>
                    
                </button>
            </div>
        </div>

    </div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const dataIndex = parseInt(urlParams.get('data'));
        const categoryIndex = parseInt(urlParams.get('category'));
        const editIndex = document.getElementById("editIndex")
        let result = {};
        console.log(categoryIndex);

        window.onpageshow = function(event){
            if(event.persisted || (window.performance && window.performance.navigation.type == 2)){
                location.href = "main_menu_selection.html?category="+categoryIndex;

            }
            editIndex.href="add_edit_page.html?data="+dataIndex+"&category="+categoryIndex;
            window.onpageshow = function(event){
            if(event.persisted || (window.performance && window.performance.navigation.type == 2)){
                location.href = "main_menu_selection.html?category="+categoryIndex;

            }
            editIndex.href="add_edit_page.html?data="+dataIndex+"&category="+categoryIndex;

            }
            fetch("txt/select.txt?nocache="+new Date().getTime())
            .then(response => response.text())
            .then(
                text => {
                    const lines = text.trim().split('\n');
                    const keys = ["music","movie","food","etc"]
                    for(let i =0; i< lines.length; i+=5){
                        const key = keys[i/5];
                        const values = lines.slice(i+1,i+5);
                        result[key] = values;

                    }
                    console.log(result);
                    /*
                    const images = [["img_example/Music/cowboy carter.jpg", "img_example/Music/edm.jpg", 
                        "img_example/Music/piano.jpg", "img_example/Music/guitar.jpg"],
                        ["img_example/Movie/joker.jpg","img_example/Movie/avengers.jpg",
                        "img_example/Movie/star wars.jpg","img_example/Movie/war.jpg"],
                        ["img_example/Food/sushi.jpg","img_example/Food/in n out.jpg",
                        "img_example/Food/chicken.jpg","img_example/Food/bbq.jpg"],
                        ["img_example/etc/london.jpg","img_example/etc/los angeles.jpg",
                        "img_example/etc/new york.jpg","img_example/etc/tokyo.jpg"] ]
                    */
                    const image_set = [[1,2,3] ,[0,2,3], [0,1,3], [0,1,2]]
                    const text_set1=[[],[],[],[]]
                    const text_set2=[[],[],[],[]]
                    const text_set3=[[],[],[],[]]
                    const text_set4=[[],[],[],[]]

                    const score_set=[[],[],[],[]]
                    const comment_set=[[],[],[],[]]

                    const images=[[],[],[],[]]
                    for(let i=0;i<4;i++){
                        const line = lines[21+i].trim().split('\\');
                        //console.log(line);
                        images[i] = [...line]

                    }
                    
                    for(let i =0;i<4;i++){
                        const cur = result[keys[i]]
                        for(let j =0; j<cur.length;j++){
                            const lines = cur[j].trim().split('\\');
                            console.log(lines)
                            text_set1[i].push(lines[0]);
                            text_set2[i].push(lines[1]);
                            text_set3[i].push(lines[2]);
                            text_set4[i].push(lines[3]);
                            score_set[i].push(lines[4]);
                            comment_set[i].push(lines[5]);
                        }
                    }

                    document.getElementById("main_img").src = images[categoryIndex][dataIndex];
                    document.getElementById("text1").innerText = text_set1[categoryIndex][dataIndex];
                    document.getElementById("text2").innerText = text_set2[categoryIndex][dataIndex];
                    document.getElementById("text3").innerText = text_set3[categoryIndex][dataIndex];
                    document.getElementById("text4").innerText = text_set4[categoryIndex][dataIndex];

                    document.getElementById("score").innerText = score_set[categoryIndex][dataIndex];

                    document.getElementById("comment").innerText = comment_set[categoryIndex][dataIndex];

                    const imageID = ['img1','img2','img3'];

                    const linkId = ['link1','link2','link3'];
                    console.log(images[categoryIndex][dataIndex]);
                    for(let i = 0; i < 3 ;i++){
                        document.getElementById(imageID[i]).src = images[categoryIndex][image_set[dataIndex][i]];
                        document.getElementById(linkId[i]).href = "select_page.html?data=" + image_set[dataIndex][i] + "&category="+categoryIndex;
                    }
                    

                    
                }
            ).catch(err => {
                console.log(err);
            })

        }

        
    </script>

</body>

</html>